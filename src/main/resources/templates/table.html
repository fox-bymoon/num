<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <link href="../static/css/bootstrap-datetimepickers.css" rel="stylesheet" />
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/moment-with-locales.js"></script>
    <script src="js/bootstrap-datetimepickers.js"></script>
    <script src="../static/js/bootstrap-datetimepicker.zh-CsN.js"></script>

</head>
<body>
<nav class="navbar navbar-expand-sm bg-light">

    <!-- Links -->
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link" href="#">机台1</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Link 2</a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#">Link 3</a>
        </li>
    </ul>

</nav>
<div class="container" style="width: 800px">
    <div class="form-group ">
        <input type="text" id="datetimepicker" class="form-control" placeholder="请选择日期">

    </div>
    <div id="container" class="container" ></div>
</div>
<script language="JavaScript">

    $('#datetimepicker').datetimepicker({
        language: 'zh-CN',//显示中文
        format: 'yyyy-mm-dd',//显示格式
        minView: "month",//设置只显示到月份
        initialDate: new Date(),
        todayBtn: true,//显示今日按钮
        autoclose: true,//选中自动关闭
        locale: moment.locale('zh-cn')
    });
    $(document).ready(function () {
        let x;
        let y;
        let y2;
        $.ajax({
            type: "get",
            url: "http://localhost:8092/findLineChart",
            data: {"mid": 1, "sysTime": "20200712"},
            async: false,
            dataType: "json",
            contentType: "application/json",
            success: function (data) {

                x = data.time.newtime;
                y = data.good.newtime;
                y2 = data.bad.newtime;
                x = x.split(",")
                y = y.split(",").map(Number)
                y2 = y2.split(",").map(Number)
                console.log(x)
                console.log(y)
                console.log(y2)

            }
        });

        let title = {
            text: '当日良率不良率一览'
        };
        let subtitle = {
            text: '测试'
        };
        let xAxis = {
            categories: x
        };
        let yAxis = {
            title: {
                text: '数量'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        };

        let tooltip = {
            valueSuffix: '个'/*'\xB0C'*/
        }

        let legend = {
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            borderWidth: 0
        };

        let series = [
            {
                name: '良品',
                data: y
            }, {
                name: '不良品',
                data: y2
            }
        ];

        let json = {};

        json.title = title;
        json.subtitle = subtitle;
        json.xAxis = xAxis;
        json.yAxis = yAxis;
        json.tooltip = tooltip;
        json.legend = legend;
        json.series = series;

        $('#container').highcharts(json);
    });
</script>
</body>
</html>